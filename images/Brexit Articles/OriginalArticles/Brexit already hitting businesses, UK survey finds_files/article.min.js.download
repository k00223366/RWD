var shareTools;var shareToolsHeight;var shareToolsBottom;var beacon;var stuckElement;var breakpoint={};var lastViewport;var currentViewport;jq(document).ready(function(){shareTools=jq(".shareTools");shareToolsBottom=jq(".shareToolsBottom");beacon=jq(".beacon");breakpoint.refreshValue();lastViewport=breakpoint.value;initShareTools(lastViewport);jq(".more-button").on("touchstart click",function(g){g.stopPropagation();g.preventDefault();jq(this).toggleClass("social-icons-More social-icons-Close");jq(this).parent().siblings(".more-tools").toggleClass("more-tools--hidden");shareTools.trigger("sticky_kit:recalc");var f=(jq(this).hasClass("social-icons-Close")?"Opened":"Closed");if(dataLayer&&Array.isArray(dataLayer)){dataLayer.push({category:"Social Tools",label:window.location.pathname,action:"More "+f.toLowerCase()},{event:"data-layer-event"})}setTimeout(function(){shareTools.trigger("sticky_kit:recalc")},500)});if(lastViewport=="all-mobile"){jq(document).on("click",function(f){var g=jq(".shareToolsBottom.fixie");if(!g.is(f.target)&&g.has(f.target).length===0&&stuckElement.hasClass("is_stuck")&&jq(".shareToolsBottom.fixie .more-button").hasClass("social-icons-Close")){jq(".shareToolsBottom.fixie .more-button").removeClass("social-icons-Close").addClass("social-icons-More");jq(".shareToolsBottom.fixie .more-tools").addClass("more-tools--hidden")}})}var b=".article_footer .topics_holder";var a=".article_footer .topics_holder.more";var e=".topics_tags";var d=".toggle_topics";var c=jq(b).css("max-height");if(jq(e).height()>jq(b).height()){jq(b).css("max-height","32px");jq(d).addClass("visible");jq(d).click(function(g){jq(this).toggleClass("active");jq(b).toggleClass("more");(jq(b).hasClass("more"))?jq(a).css("max-height",(jq(e).height())):jq(b).css("max-height","32px");var f=(jq(this).hasClass("active")?"Opened":"Closed");_gaq.push(["_trackEvent","[Topics Tags]","More Topics",f]);if(dataLayer&&Array.isArray(dataLayer)){dataLayer.push({category:"Topics List",label:window.location.pathname,action:"List "+f.toLowerCase()},{event:"data-layer-event"})}})}});breakpoint.refreshValue=function(){this.value=window.getComputedStyle(document.querySelector("body"),":before").getPropertyValue("content").replace(/\"/g,"")};jq(window).smartresize(function(){breakpoint.refreshValue();currentViewport=breakpoint.value;if(currentViewport!=lastViewport){jq(stuckElement).trigger("sticky_kit:detach");initShareTools(currentViewport)}lastViewport=currentViewport});function initShareTools(a){beacon.height(currentWindowHeight);shareToolsHeight=shareTools.outerHeight(true);if(a=="all-above-mobile"){jq(shareTools).not(".lt-ie9 .shareTools").stick_in_parent({offset_top:54});stuckElement=shareTools}else{if(a=="all-mobile"){jq(beacon).stick_in_parent({offset_top:0}).on("sticky_kit:stick",function(b){shareToolsBottom.addClass("fixie--hidden");shareToolsBottom.addClass("fixie");shareToolsBottom.removeClass("fixie--hidden");jq(".at-svc-pinterest_share").click(function(){shareToolsBottom.removeClass("fixie")})}).on("sticky_kit:bottom",function(b){shareToolsBottom.addClass("fixie--hidden");shareToolsBottom.removeClass("fixie");shareToolsBottom.removeClass("fixie--hidden")}).on("sticky_kit:unbottom",function(b){shareToolsBottom.addClass("fixie--hidden");shareToolsBottom.addClass("fixie")}).on("sticky_kit:unstick",function(b){shareToolsBottom.addClass("fixie--hidden");shareToolsBottom.removeClass("fixie");shareToolsBottom.removeClass("fixie--hidden")});stuckElement=beacon}}}if(!Array.prototype.filter){Array.prototype.filter=function(b){if(this===void 0||this===null){throw new TypeError()}var f=Object(this);var a=f.length>>>0;if(typeof b!=="function"){throw new TypeError()}var e=[];var d=arguments[1];for(var c=0;c<a;c++){if(c in f){var g=f[c];if(b.call(d,g,c,f)){e.push(g)}}}return e}}jq(document).ready(function(){jq("#more-related").on("touchstart click",function(c){c.stopPropagation();c.preventDefault();jq("#related-collapse").collapse("toggle")});jq("#related-collapse").on("shown",function(){jq("#more-related").addClass("content-shown")});jq("#related-collapse").on("hidden",function(){jq("#more-related").removeClass("content-shown")});jq(".article_holder p").selectionSharer();var b;var a;jq(document).ready(function(){var c=jq(".reading-progress");b=Math.round(jq("article.article").height()+jq("header").height()-window.innerHeight);c.attr("max",b);jq(window).on("scroll",throttle(function(d){a=Math.round(jq(window).scrollTop()-jq("header").height());c.attr("value",a)},50))})});