/**
 * @brightcove/videojs-ima3
 * @version 2.16.1
 * @copyright 2017 Brightcove, Inc.
 * @license UNLICENSED
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsIma3=e()}}(function(){return function e(t,a,n){function i(r,d){if(!a[r]){if(!t[r]){var s="function"==typeof require&&require;if(!d&&s)return s(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var l=a[r]={exports:{}};t[r][0].call(l.exports,function(e){var a=t[r][1][e];return i(a?a:e)},l,l.exports,e,t,a,n)}return a[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e,t,a){},{}],2:[function(e,t,a){(function(a){var n="undefined"!=typeof a?a:"undefined"!=typeof window?window:{},i=e("min-document");if("undefined"!=typeof document)t.exports=document;else{var o=n["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),t.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":1}],3:[function(e,t,a){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,a){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){e.ads.cancelPlayTimeout||(l.default.browser.IS_IOS&&l.default.browser.IS_IPHONE&&!e.el_.hasAttribute("playsinline")&&!function(){var t=e.currentWidth?e.currentWidth():e.width(),a=e.currentHeight?e.currentHeight():e.height(),n=s.default.createElement("div");n.style.width=t+"px",n.style.height=a+"px",n.style.background="black",e.el_.parentNode.insertBefore(n,e.el_),e.el_.style.display="none",e.one(["adstart","adtimeout","adserror","adscanceled","adskip","playing"],function(){e.el_.style.display="block",n.remove()}),e.on("fullscreenchange",function(){n&&!e.isFullscreen()&&(e.el_.style.display="block",n.remove())})}(),e.ads.cancelPlayTimeout=r.default.setTimeout(function(){e.ads.cancelPlayTimeout=null,e.paused()||e.pause(),e.ads.cancelledPlay=!0},1))}a.__esModule=!0,a.default=i;var o=e("global/window"),r=n(o),d=e("global/document"),s=n(d),u="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,l=n(u)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/document":2,"global/window":3}],5:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){e.ads.contentSrc=e.currentSrc();var t=function(){if("ad-playback"!==e.ads.state){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t)}};e.on("loadstart",t),r.default.setTimeout(t,1)}a.__esModule=!0,a.default=i;var o=e("global/window"),r=n(o)},{"global/window":3}],6:[function(e,t,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var a=e.textTracks(),n=function(a){"metadata"===a.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(a),t(e,a))};if(a.length>0)for(var i=0;i<a.length;i++){var o=a[i];n(o)}else a.addEventListener("addtrack",function(e){var t=e.track;n(t)})}function i(e){}function o(e,t){return t}function r(e,t){return t.id}function d(e,t,a,n){e.ads.includedCues={};for(var i=0;i<t.length;i++){var o=t[i],r=this.getSupportedAdCue(e,o);if(r===-1)return void u.default.log.warn("Skipping as this is not a supported ad cue.",o);var d=this.getCueId(e,o),s=o.startTime;if(l(e,d))return void u.default.log("Skipping ad already seen with ID "+d);a(e,r,d,s),c(e,d),void 0!==n&&n(e,r)}}a.__esModule=!0,a.processMetadataTracks=n,a.setMetadataTrackMode=i,a.getSupportedAdCue=o,a.getCueId=r,a.processAdTrack=d;var s="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,u=t(s),l=function(e,t){return void 0!==t&&e.ads.includedCues[t]},c=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,a){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){void 0===t&&(t=!1);var n={};void 0!==a&&(n=a),n["{player.id}"]=this.options_["data-player"],n["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",n["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",n["{mediainfo.description}"]=this.mediainfo?this.mediainfo.description:"",n["{mediainfo.tags}"]=this.mediainfo?this.mediainfo.tags:"",n["{mediainfo.reference_id}"]=this.mediainfo?this.mediainfo.reference_id:"",n["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",n["{mediainfo.ad_keys}"]=this.mediainfo?this.mediainfo.ad_keys:"",n["{player.duration}"]=this.duration(),n["{timestamp}"]=(new Date).getTime(),n["{document.referrer}"]=u.default.referrer,n["{window.location.href}"]=d.default.location.href,n["{random}"]=Math.floor(1e12*Math.random()),m(this.mediainfo,n,"custom_fields"),m(this.mediainfo,n,"customFields");for(var i in n)e=e.split(i).join(f(n[i],t));return e=e.replace(/{pageVariable\.([^}]+)}/g,function(e,a){for(var n=void 0,i=d.default,r=a.split("."),s=0;s<r.length;s++)s===r.length-1?n=i[r[s]]:i=i[r[s]];var u="undefined"==typeof n?"undefined":o(n);return null===n?"null":void 0===n?(c.default.log.warn('Page variable "'+a+'" not found'),""):"string"!==u&&"number"!==u&&"boolean"!==u?(c.default.log.warn('Page variable "'+a+'" is not a supported type'),""):f(String(n),t)})}a.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a.default=i;var r=e("global/window"),d=n(r),s=e("global/document"),u=n(s),l="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,c=n(l),f=function(e,t){return t?encodeURIComponent(e):e},m=function(e,t,a){if(e&&e[a])for(var n=e[a],i=Object.keys(n),o=0;o<i.length;o++){var r="{mediainfo."+a+"."+i[o]+"}";t[r]=n[i[o]]}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/document":2,"global/window":3}],8:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var i=e("global/window"),o=n(i),r="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,d=n(r),s=e("./redispatch.js"),u=n(s),l=e("./snapshot.js"),c=a(l),f=e("./contentupdate.js"),m=n(f),p=e("./cancelContentPlay.js"),g=n(p),h=e("./macros.js"),v=n(h),y=e("./cueTextTracks.js"),T=a(y),b=d.default.getComponent("Html5").Events,w=function(e){var t=e.$(".vjs-tech");t&&t.removeAttribute("poster")},M={timeout:5e3,prerollTimeout:100,postrollTimeout:100,debug:!1,stitchedAds:!1},C=function(e){var t=this,a=d.default.mergeOptions(M,e),n=b.concat(["firstplay","loadedalldata","playing"]);t.on(n,u.default),t.on("ended",function(){t.hasClass("vjs-has-started")||t.addClass("vjs-has-started")}),t.on(["addurationchange","adcanplay"],function(){t.currentSrc()!==t.ads.snapshot.currentSrc&&t.play()}),t.on("nopreroll",function(){t.ads.nopreroll_=!0}),t.on("nopostroll",function(){t.ads.nopostroll_=!0}),t.on(["ads-ad-started","playing"],function(){t.removeClass("vjs-ad-loading")}),t.ads={state:"content-set",disableNextSnapshotRestore:!1,_contentHasEnded:!1,VERSION:"4.2.2",reset:function(){t.ads.disableNextSnapshotRestore=!1,t.ads._contentHasEnded=!1,t.ads.snapshot=null},startLinearAdMode:function(){"preroll?"!==t.ads.state&&"content-playback"!==t.ads.state&&"postroll?"!==t.ads.state||t.trigger("adstart")},endLinearAdMode:function(){"ad-playback"===t.ads.state&&(t.trigger("adend"),t.removeClass("vjs-ad-loading"))},skipLinearAdMode:function(){"ad-playback"!==t.ads.state&&t.trigger("adskip")},stitchedAds:function(e){return void 0!==e&&(this._stitchedAds=!!e),this._stitchedAds},videoElementRecycled:function(){if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var e=t.src()!==this.snapshot.src,a=t.currentSrc()!==this.snapshot.currentSrc;return e||a},isLive:function(e){return e.duration()===1/0||"8"===d.default.browser.IOS_VERSION&&0===e.duration()},shouldPlayContentBehindAd:function(e){return!d.default.browser.IS_IOS&&!d.default.browser.IS_ANDROID&&e.duration()===1/0}},t.ads.stitchedAds(a.stitchedAds),t.ads.cueTextTracks=T,t.ads.adMacroReplacement=v.default.bind(t),(0,m.default)(t),t.on("contentupdate",t.ads.reset);var i={"content-set":{events:{adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="ads-ready"},play:function(){this.state="ads-ready?",(0,g.default)(t),w(t)},adserror:function(){this.state="content-playback"},adskip:function(){this.state="content-playback"}}},"ads-ready":{events:{play:function(){this.state="preroll?",(0,g.default)(t)},adskip:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"preroll?":{enter:function(){t.ads.nopreroll_?(t.trigger("readyforpreroll"),o.default.setTimeout(function(){t.trigger("nopreroll")},1)):(t.addClass("vjs-ad-loading"),t.ads.adTimeoutTimeout=o.default.setTimeout(function(){t.trigger("adtimeout")},a.prerollTimeout),t.trigger("readyforpreroll"))},leave:function(){o.default.clearTimeout(t.ads.adTimeoutTimeout)},events:{play:function(){(0,g.default)(t)},adstart:function(){this.state="ad-playback"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"},nopreroll:function(){this.state="content-playback"}}},"ads-ready?":{enter:function(){t.addClass("vjs-ad-loading"),t.ads.adTimeoutTimeout=o.default.setTimeout(function(){t.trigger("adtimeout")},a.timeout)},leave:function(){o.default.clearTimeout(t.ads.adTimeoutTimeout),t.removeClass("vjs-ad-loading")},events:{play:function(){(0,g.default)(t)},adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="preroll?"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"ad-playback":{enter:function(){t.ads.shouldPlayContentBehindAd(t)||(this.snapshot=c.getPlayerSnapshot(t)),t.ads.shouldPlayContentBehindAd(t)&&(this.preAdVolume_=t.volume(),t.volume(0)),t.addClass("vjs-ad-playing"),t.hasClass("vjs-live")&&t.removeClass("vjs-live"),w(t),t.ads.cancelPlayTimeout&&o.default.setTimeout(function(){o.default.clearTimeout(t.ads.cancelPlayTimeout),t.ads.cancelPlayTimeout=null},1)},leave:function(){t.removeClass("vjs-ad-playing"),t.ads.isLive(t)&&t.addClass("vjs-live"),t.ads.shouldPlayContentBehindAd(t)||c.restorePlayerSnapshot(t,this.snapshot),t.ads.shouldPlayContentBehindAd(t)&&t.volume(this.preAdVolume_)},events:{adend:function(){this.state="content-resuming"},adserror:function(){this.state="content-resuming",t.trigger("adend")}}},"content-resuming":{enter:function(){this._contentHasEnded&&(o.default.clearTimeout(t.ads._fireEndedTimeout),t.ads._fireEndedTimeout=o.default.setTimeout(function(){t.trigger("ended")},1e3))},leave:function(){o.default.clearTimeout(t.ads._fireEndedTimeout)},events:{contentupdate:function(){this.state="content-set"},contentresumed:function(){this.state="content-playback"},playing:function(){this.state="content-playback"},ended:function(){this.state="content-playback"}}},"postroll?":{enter:function(){this.snapshot=c.getPlayerSnapshot(t),t.ads.nopostroll_?o.default.setTimeout(function(){t.ads.state="content-resuming",t.trigger("ended")},1):(t.addClass("vjs-ad-loading"),t.ads.adTimeoutTimeout=o.default.setTimeout(function(){t.trigger("adtimeout")},a.postrollTimeout))},leave:function(){o.default.clearTimeout(t.ads.adTimeoutTimeout),t.removeClass("vjs-ad-loading")},events:{adstart:function(){this.state="ad-playback"},adskip:function(){this.state="content-resuming",o.default.setTimeout(function(){t.trigger("ended")},1)},adtimeout:function(){this.state="content-resuming",o.default.setTimeout(function(){t.trigger("ended")},1)},adserror:function(){this.state="content-resuming",o.default.setTimeout(function(){t.trigger("ended")},1)},contentupdate:function(){this.state="ads-ready?"}}},"content-playback":{enter:function(){t.ads.cancelPlayTimeout&&(o.default.clearTimeout(t.ads.cancelPlayTimeout),t.ads.cancelPlayTimeout=null),t.trigger({type:"contentplayback",triggerevent:t.ads.triggerevent}),t.ads.cancelledPlay&&(t.ads.cancelledPlay=!1,t.paused()&&t.play())},events:{adsready:function(){t.trigger("readyforpreroll")},adstart:function(){this.state="ad-playback"},contentupdate:function(){t.ads.shouldPlayContentBehindAd(t)||(0,g.default)(t),t.paused()?this.state="content-set":this.state="ads-ready?"},contentended:function(){return this._contentHasEnded?void(this.state="content-resuming"):(this._contentHasEnded=!0,void(this.state="postroll?"))}}}},r=function(e){var n=t.ads.state,o=i[n].events;if(o){var r=o[e.type];r&&r.apply(t.ads)}if(n!==t.ads.state){var s=n,u=t.ads.state;t.ads.triggerevent=e.type,i[s].leave&&i[s].leave.apply(t.ads),i[u].enter&&i[u].enter.apply(t.ads),a.debug&&d.default.log("ads",t.ads.triggerevent+" triggered: "+s+" -> "+u)}};t.on(b.concat(["adtimeout","contentupdate","contentplaying","contentended","contentresumed","adstart","adend","adskip","adsready","adserror","adscanceled","nopreroll"]),r),t.paused()||r({type:"play"})};d.default.plugin("ads",C)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cancelContentPlay.js":4,"./contentupdate.js":5,"./cueTextTracks.js":6,"./macros.js":7,"./redispatch.js":9,"./snapshot.js":10,"global/window":3}],9:[function(e,t,a){"use strict";function n(e){if("playing"===e.type&&"preroll?"===this.ads.state)o(this,"ad",e);else if("playing"!==e.type||"ad-playback"!==this.ads.state||this.ads.videoElementRecycled())if("playing"===e.type&&"ads-ready?"===this.ads.state)o(this,"ad",e);else{if("playing"===e.type&&"ad-playback"===this.ads.state&&this.ads.videoElementRecycled())return void i(this,e);if("ad-playback"===this.ads.state)(this.ads.videoElementRecycled()||this.ads.stitchedAds())&&o(this,"ad",e);else if("content-playback"===this.ads.state&&"ended"===e.type)o(this,"content",e);else if("content-resuming"===this.ads.state){if(this.ads.snapshot&&this.currentSrc()!==this.ads.snapshot.currentSrc){if("loadstart"===e.type)return;return o(this,"content",e)}if(this.ads.snapshot&&this.ads.snapshot.ended){if("pause"===e.type||"ended"===e.type)return;return o(this,"content",e)}"playing"!==e.type&&o(this,"content",e)}}else o(this,"ad",e)}a.__esModule=!0,a.default=n;var i=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},o=function(e,t,a){i(e,a),e.trigger({type:t+a.type,state:e.ads.state,originalEvent:a})}},{}],10:[function(e,t,a){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=void 0;t=u.default.browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var a=e.$(".vjs-tech"),n=e.remoteTextTracks?e.remoteTextTracks():[],i=e.textTracks?e.textTracks():[],o=[],r=[],d={ended:e.ended(),currentSrc:e.currentSrc(),src:e.src(),currentTime:t,type:e.currentType()};a&&(d.nativePoster=a.poster,d.style=a.getAttribute("style"));for(var s=0;s<n.length;s++){var l=n[s];o.push({track:l,mode:l.mode}),l.mode="disabled"}d.suppressedRemoteTracks=o;for(var c=0;c<i.length;c++){var f=i[c];r.push({track:f,mode:f.mode}),f.mode="disabled"}return d.suppressedTracks=r,d}function o(e,t){if(e.ads.disableNextSnapshotRestore===!0)return void(e.ads.disableNextSnapshotRestore=!1);var a=e.$(".vjs-tech"),n=20,i=t.suppressedRemoteTracks,o=t.suppressedTracks,r=void 0,s=function(){for(var e=0;e<i.length;e++)r=i[e],r.track.mode=r.mode;for(var t=0;t<o.length;t++)r=o[t],r.track.mode=r.mode},l=function(){var a=void 0;u.default.browser.IS_IOS&&e.ads.isLive(e)?t.currentTime<0&&(a=e.seekable().length>0?e.seekable().end(0)+t.currentTime:e.currentTime(),e.currentTime(a)):t.ended?e.currentTime(e.duration()):e.currentTime(t.currentTime),t.ended||e.play()},c=function t(){if(e.off("contentcanplay",t),e.ads.tryToResumeTimeout_&&(e.clearTimeout(e.ads.tryToResumeTimeout_),e.ads.tryToResumeTimeout_=null),a=e.el().querySelector(".vjs-tech"),a.readyState>1)return l();if(void 0===a.seekable)return l();if(a.seekable.length>0)return l();if(n--)d.default.setTimeout(t,50);else try{l()}catch(e){u.default.log.warn("Failed to resume the content after an advertisement",e)}};t.nativePoster&&(a.poster=t.nativePoster),"style"in t&&a.setAttribute("style",t.style||""),e.ads.videoElementRecycled()?(e.one("contentloadedmetadata",s),e.src({src:t.currentSrc,type:t.type}),e.load(),e.one("contentcanplay",c),e.ads.tryToResumeTimeout_=e.setTimeout(c,2e3)):e.ended()&&t.ended||(s(),e.play())}a.__esModule=!0,a.getPlayerSnapshot=i,a.restorePlayerSnapshot=o;var r=e("global/window"),d=n(r),s="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,u=n(s)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":3}],11:[function(e,t,a){(function(t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function a(e){return e&&e.__esModule?e:{default:e}}function a(e){return e&&e.__esModule?e:{default:e}}var n="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,i=a(n);e("videojs-contrib-ads");var o=e("global/window"),r=a(o),d=i.default.ima3={},s=d.defaults={sdkurl:(/^(file|data):/.test(r.default.location.protocol)?"http:":"")+"//s0.2mdn.net/instream/html5/ima3.js",adTechOrder:["flash","html5"],serverUrl:("file:"===r.default.location.protocol?"http:":"")+"//pubads.g.doubleclick.net/gampad/ads?sz=400x300&iu=%2F6062%2Fiab_vast_samples&ciu_szs=300x250%2C728x90&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=[referrer_url]&correlator=[timestamp]&cust_params=iab_vast_samples%3Dlinear",adSwf:("file:"===r.default.location.protocol?"http:":"")+"//players.brightcove.net/videojs-ima3/2.16.1/videojs.ima3.swf",loadingSpinner:!1,timeout:4e3,requestMode:"onload",hardTimeouts:!0},u=i.default.ima3.extend=function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)a.hasOwnProperty(n)&&(e[n]=a[n])}return e},l=function(e){var t=this,a=u({},s,e||{}),n=this.el().querySelector(".vjs-tech"),o=a.adTechOrder,d=!1,l=void 0;if(this.addClass("vjs-ima3-not-playing-yet"),e&&e.useMediaCuePoints&&"oncue"!==e.requestMode)throw new Error("useMediaCuePoints must be used with requestMode `oncue` rather than the currently set `"+e.requestMode+"`");if(this.on(["playing"],function(e){t.removeClass("vjs-ima3-not-playing-yet"),t.tech_.el_.removeAttribute("poster")}),a.prerollTimeout&&(i.default.log.warn("The prerollTimeout option is deprecated and will be removed, please use the timeout option. The prerollTimeout will be set to the value of the timeout option."),a.prerollTimeout=void 0),a.postrollTimeout&&(i.default.log.warn("The postrollTimeout option is deprecated and will be removed, please use the timeout option. The postrollTimeout will be set to the value of the timeout option."),a.postrollTimeout=void 0),a.timeout&&(a.prerollTimeout=a.postrollTimeout=a.timeout),a.contribAdsPrerollTimeout&&(a.prerollTimeout=a.contribAdsPrerollTimeout),a.contribAdsPostrollTimeout&&(a.postrollTimeout=a.contribAdsPostrollTimeout),!this.autoplay()||i.default.browser.IS_IOS||i.default.browser.IS_ANDROID||this.addClass("vjs-ima3-autoplay"),"onplay"===a.requestMode&&this.autoplay()&&(a.requestMode="onload"),!("adControlBar"in a)){var c=!0,f=this.getChild("controlBar");f&&f.getChild("volumeMenuButton")&&(c=f.getChild("volumeMenuButton").options_.vertical),a.adControlBar=u({},this.options_.children.controlBar,{name:"adControlBar",volumeMenuButton:{vertical:c}})}a.eventMap={"ima3-click":"ads-click","ima3-started":"ads-ad-started","ima3-complete":"ads-ad-ended","ima3-first-quartile":"ads-first-quartile","ima3-midpoint":"ads-midpoint","ima3-third-quartile":"ads-third-quartile","ima3-volume-changed":"ads-volumechange","ima3-paused":"ads-pause","ima3-resumed":"ads-play","ima3-all-ads-completed":"ads-allpods-completed","ads-request":"ads-request","ads-pod-ended":"ads-pod-ended","ads-pod-started":"ads-pod-started","ads-load":"ads-load"},this.ads(a),this.ads.ad={},this.ads.pod={id:void 0,size:void 0},"oncue"===a.requestMode&&this.on("loadstart",function(){var e=t.ads.cueTextTracks,a=!1,n=!1,o={},r=function(t){return function(){var r=this.activeCues;if(!t.scrubbing()){var d=function(e,t,o,r){var d=void 0,s=function o(){if(e.off("play",o),e.off("contentended",o),d=!e.ima3.settings.useMediaCuePoints&&t.serverUrl?t.serverUrl:e.ima3.settings.serverUrl,d=e.ima3.adMacroReplacement(d),t.duration&&(d+=/\?/.test(d)?"&breaklength="+t.duration:"?breaklength="+t.duration),0===r){if(a)return;a=!0}if(Math.abs(r-e.duration())<1){if(n)return;n=!0}Math.abs(r-e.currentTime())>1||(i.default.log("Oncue ad request at "+r+" seconds"),e.ima3.adrequest(d))};return 0===r&&!a&&e.paused()?void e.one("play",s):Math.abs(r-e.duration())<1?void e.one("contentended",s):(e.off("play",s),e.off("contentended",s),void(e.ima3.adrequest?s():e.on("ima3-ready",s)))},s=function(e,t,a){!e.ima3.settings.useMediaCuePoints&&"adCancel"===t.name&&e.ima3.adsManager&&(e.ima3.adsManager.stop(),i.default.log("Cancelling ads at "+a+" seconds"))};if(r.length>0){var u=new Array(r[r.length-1]),l=e.getCueId(t,u[0]);o[l]||(e.processAdTrack(t,u,d,s),o[l]=!0)}}}},s=function(e,t){for(var a=t.cues,n=void 0,i=0;i<a.length;i++)a[i].startTime===e.mediainfo.duration&&(n=a[i]);n||(e.trigger("nopostroll"),e.one("ended",function(){t.mode="hidden"})),t.addEventListener("cuechange",r(e))};e.setMetadataTrackMode=function(e){e.mode="hidden"},e.getCueId=function(e,t){return e.ima3.settings.useMediaCuePoints?t.originalCuePoint.id:t.id},e.getSupportedAdCue=function(e,t){var a=void 0;if(t&&t.value&&"TXXX"===t.value.key){try{a=JSON.parse(t.value.data)}catch(e){return void i.default.log.error("ERROR: Parsing JSON. Please confirm that JSON is valid.",e.message)}return!a.name||"adcue"!==a.name.toLowerCase()&&"adcancel"!==a.name.toLowerCase()?-1:a}return e.ima3.settings.useMediaCuePoints&&"oncue"===e.ima3.settings.requestMode&&t.originalCuePoint&&t.text&&"ad"===t.text.toLowerCase()?t:-1},d&&e.processMetadataTracks(t,s)}),"ondemand"!==a.requestMode&&"oncue"!==a.requestMode||(this.trigger("nopreroll"),"ondemand"===a.requestMode&&this.trigger("nopostroll"),this.trigger("adsready"),this.on("contentupdate",function(){t.trigger("adsready")})),this.on("ima3-ready",function(){this.ima3.isReady_=!0,this.contextmenu&&(this.contextmenu.options.disabled=this.ima3.contextMenuPreviouslyDisabled),this.removeClass("vjs-ima3-right-click");for(var e=0;e<this.ima3.readyQueue_.length;e++)this.ima3.readyQueue_[e].call(this);this.ima3.readyQueue_=[]}),this.on("ads-ad-started",function(){this.ima3.volume=this.volume(),this.muted()?this.ima3.adPlayer.muted(!0):this.ima3.adPlayer.volume(this.volume()||this.ads.preAdVolume_),this.ima3.adPlayer.trigger("durationchange")}),this.on("ads-ad-ended",function(){this.volume(this.ima3.adPlayer.volume()),this.ads.preAdVolume_&&(this.ads.preAdVolume_=this.volume()),this.muted(this.ima3.adPlayer.muted())}),this.ima3={readyQueue_:[],isReady_:!1,player:this,tech:n,settings:a,ready:function(e){return e&&(t.ima3.isReady_?e.call(t):(void 0===t.ima3.readyQueue_&&(t.ima3.readyQueue_=[]),t.ima3.readyQueue_.push(e))),t.ima3},makeAdRequestFunction:function(e){var t=this;return function(a){var n=a||t.settings.serverUrl;return t.player.mediainfo&&"FREE"===t.player.mediainfo.economics?void i.default.log("On demand adRequest attempted on video with advertising disabled."):n?(i.default.log("Clearing any previous VAST ad data and triggering ondemand adrequest."),void e.call(t,n)):void i.default.log("On demand adRequest attempted without an adTagUrl!")}},adMacroReplacement:function(e){var a={};return t.bcAnalytics&&(a["{player.url}"]=r.default.location.protocol+"//"+t.bcAnalytics.settings.player),t.ads.adMacroReplacement(e,!0,a)},insertAdContainer:function(e){var a=t.el().querySelector(".vjs-big-play-button");t.el().insertBefore(e,a)},version:"2.16.1",VERSION:"2.16.1"},this.on("adstart",function(e){t.duration()!==1/0&&t.pause(),t.hasStarted(!0)}),this.on("adend",function(){t.duration()===1/0&&t.trigger("playing")}),this.on("adplay",function(){var e=t.src()!==t.ads.snapshot.src||t.currentSrc()!==t.ads.snapshot.currentSrc;e||setTimeout(function(){t.pause()},0)});for(var m=0;m<o.length;m++)if(l=o[m].charAt(0).toUpperCase()+o[m].substring(1).toLowerCase(),i.default.getComponent(l).isSupported()){i.default.ima3[l].call(this,a),this.addClass("vjs-ima3-"+l.toLowerCase()),a.loadingSpinner&&this.addClass("ima3-loading-spinner"),d=!0;break}if(!d)return void i.default.log("No supported ad tech available. If you have removed one of the default ad techs, you may want to consider adding it back in.")};i.default.ima3.AdPlayer=i.default.extend(i.default.getComponent("Component"),{constructor:function(){var e=[this].concat(Array.prototype.slice.call(arguments));i.default.getComponent("Component").apply(this,e)},buffered:function(){return[]},language:function(e){return void 0===e?this.options_.contentPlayer.language_:this.options_.contentPlayer.language(e)},languages:function(){return this.options_.contentPlayer.languages()},localize:function(e){return this.options_.contentPlayer.localize(e)},remainingTime:function(){return this.duration()-this.currentTime()},exitFullscreen:function(){return this.options_.contentPlayer.exitFullscreen()},reportUserActivity:function(){},requestFullscreen:function(){return this.options_.contentPlayer.requestFullscreen()},textTracks:function(){},remoteTextTracks:function(){},addTextTrack:function(){},addRemoteTextTrack:function(){},removeRemoteTextTrack:function(){},scrubbing:function(){}}),i.default.plugin("ima3",l);var n="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,i=a(n),o=e("global/window"),r=a(o),c=e("global/document"),f=a(c),m=function(e){for(var t=e.split("."),a=r.default,n=0;n<t.length;n++)a[t[n]]||(a[t[n]]={}),a=a[t[n]]};i.default.ima3.Flash=function(e){var t=this,a=f.default.createElement("div"),n='<param name="flashvars" value="playerId='+this.el().id+"&debug="+this.ima3.settings.debug+'"><param name="wmode" value="transparent"><param name="AllowScriptAccess" value="always">',o=this.el().id+"-ima3-flash",d=i.default.getComponent("ControlBar"),s=void 0,u=void 0,l=void 0,c=void 0,p=function(e){return e&&!/^https?:|file:/.test(e)?r.default.location.protocol+e:e},g=function(){s.vjs_postrolltimeout(),t.trigger("ad-hard-timeout"),i.default.log("ima3-hard-timeout")},h=function(){t.ads.ad={},t.ads.pod={}},v=function(e){t.ima3.ready(function(){h(),s.vjs_trigger({type:"adrequest",adTag:this.ima3.adMacroReplacement(p(e)),currentTime:this.currentTime(),options:{}})})};this.ima3.adTech="flash",i.default.ima3.Flash.adrequest=function(){return i.default.log.warn("videojs.ima3.Flash.adrequest is deprecated. Use player.ima3.adrequest instead."),v.apply(this,arguments)},this.ima3.adrequest=this.ima3.makeAdRequestFunction(v),e.serverUrl=p(e.serverUrl),a.className="vjs-ima3-ad-container vjs-ima3-ad-background",a.innerHTML='<!--[if !IE]>--><object width="100%" height="100%" type="application/x-shockwave-flash" data="'+e.adSwf+'">'+n+"</object><!--<![endif]-->",s=a.querySelector("object"),s||(a.innerHTML='<object width="100%" height="100%" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">  <param name="movie" value="'+e.adSwf+'">'+n+"</object>",s=a.querySelector("object")),s.id=o,s.name=o,s.className="vjs-ima3-flash-ad-container",m("google.ima.ImaSdkSettings"),m("google.ima.AdsManager"),r.default.google.ima.ImaSdkSettings.setAutoPlayAdBreaks=function(e){s.vjs_autoplayadbreaks(e)},r.default.google.ima.AdsManager.getRemainingTime=function(){return s.vjs_getRemainingTime()},r.default.google.ima.AdsManager.destroy=function(){return s.vjs_destroyAdsManager()},r.default.google.ima.AdsManager.stop=function(){return s.vjs_stopAdsManager()},this.contextmenu&&(this.ima3.contextMenuPreviouslyDisabled=this.contextmenu.options.disabled,this.contextmenu.options.disabled=!0),this.addClass("vjs-ima3-right-click"),this.ima3.insertAdContainer(a);var y=i.default.ima3.Flash.adPlayer(s,{contentPlayer:this}),T=new d(y,e.adControlBar);T.addClass("vjs-ad-control-bar"),this.addClass("vjs-ad-controls"),this.addChild(T),this.on(["contentupdate","adend","ima3-ready"],function(){h()}),this.on("adscanceled",function(){s.vjs_destroyAdsManager&&s.vjs_destroyAdsManager()}),this.on("adserror",function(){this.removeClass("ima3-ad-loading"),s.vjs_destroyAdsManager&&s.vjs_destroyAdsManager()});var b=function(){"none"===s.style.display&&(t.contextmenu&&(t.contextmenu.options.disabled=t.ima3.contextMenuPreviouslyDisabled),t.removeClass("vjs-ima3-right-click"),t.trigger("adtimeout"),r.default.clearInterval(u)),t.ima3.settings.hardTimeouts&&t.ads.adTimeoutTimeout&&!l&&(r.default.clearTimeout(t.ads.adTimeoutTimeout),l=!0,r.default.setTimeout(function(){c=!0},t.ima3.settings.timeout))};u=r.default.setInterval(function(){b();var a=function(e){s.vjs_trigger({type:e.type,options:{serverUrl:t.ima3.adMacroReplacement(t.ima3.settings.serverUrl)}})};s.vjs_trigger&&(t.trigger("ima3-ready"),r.default.clearInterval(u),c&&t.trigger("adtimeout"),t.on("readyforpreroll",function(e){var n=t.ima3.settings;"ondemand"!==n.requestMode&&"oncue"!==n.requestMode&&a(e)}),t.on("contentended",function(e){"postroll?"===this.ads.state&&(this.one("adtimeout",g),e.type="ended",a(e))}),t.on(["contentupdate","dispose"],function(){t.off("adtimeout",g)}),t.on("timeupdate",function(e){s.vjs_trigger({type:e.type,currentTime:t.currentTime()})}),t.on("contentupdate",function(n){var i=t.currentSrc();return h(),t.mediainfo&&"FREE"===t.mediainfo.economics?(t.trigger("adscanceled"),t.trigger("nopreroll"),void t.trigger("nopostroll")):void(t.ima3.currentSrc!==i&&(t.ima3.currentSrc=i,"onplay"===e.requestMode?t.paused()?t.one("play",function(e){a({type:"contentupdate"})}):a({type:"contentupdate"}):"onload"===e.requestMode&&a(n)))}),t.ready(function(){var n=t.currentSrc();if(t.ads.ad={},t.ads.pod={},n&&t.ima3.currentSrc!==n){if(t.ima3.currentSrc=n,t.mediainfo&&"FREE"===t.mediainfo.economics)return t.trigger("adscanceled"),t.trigger("nopreroll"),void t.trigger("nopostroll");"onplay"===e.requestMode?t.one("play",function(){a({type:"contentupdate"})}):"onload"===e.requestMode&&a({type:"contentupdate"})}}),t.on("debug",function(e){s.vjs_trigger({type:e.type,enable:e.enable})}))},50),this.ima3.adControlBar=T,this.ima3.adPlayer=y,this.ima3.el=s,this.ima3._object=s,this.ima3.adsManager=r.default.google.ima.AdsManager},i.default.ima3.Flash.adPlayer=function(e,t){var a=t.contentPlayer,n=new i.default.ima3.AdPlayer(t),o=[],d=function(e,t){o.push({type:e,handler:t}),a.one(e,t)},s=function(e){a.ima3._object.vjs_cancelNextAd(),a.ima3._object.vjs_stopAdsManager(),"ad-playback"===a.ads.state&&a.trigger("adend")};a.on("ima3-ads-manager-loaded",function(e){var t=a.ima3.settings,n=a.ima3._object.vjs_getCuePoints(),o=n&&n.length>0;t.useMediaCuePoints&&"oncue"===t.requestMode&&o&&(s(e),i.default.log.error("Cancelling VMAP ad because useMediaCuePoints must be used with VAST"))}),a.on("contentupdate",function(){for(var e=0;e<o.length;e++){var t=o[e];a.off(t.type,t.handler)}o=[]});var u=function(t,a){return function(){var n="vjs_"+t;return e[n]?e[n].apply(e,Array.prototype.slice.call(arguments)):a;
}},l=u("duration",-1),c=u("currentTime"),m=u("pause"),p=u("play"),g=u("volume",1);return function(){var e=!1,t=250,o={0:"PREROLL","-1":"POSTROLL"},s=function(){if(!n.paused()){var e=f.default.querySelector(".vjs-ima3-flash .vjs-ad-control-bar .vjs-play-progress");e.className.match("vjs-play-progress-resetting")||n.trigger("timeupdate")}},u=function a(){e&&(s(),r.default.setTimeout(a,t))},l=function(e){void 0!==a.ima3.currentAd&&(a.ads.ad.id=a.ima3.currentAd.id,a.ads.ad.duration=a.ima3.currentAd.duration,a.ads.ad.index=a.ima3.currentAd.adPodInfo.adPosition-1,a.ads.ad.type=o[a.ima3.currentAd.adPodInfo.timeOffset]||"MIDROLL",a.ads.pod.id=a.ima3.currentAd.adPodInfo.podIndex,a.ads.pod.size=a.ima3.currentAd.adPodInfo.totalAds),a.trigger(a.ima3.settings.eventMap[e.type])};n.on("play",function(){a.removeClass("vjs-ima3-paused"),e=!0,r.default.setTimeout(u,t)}),n.on("pause",function(){a.addClass("vjs-ima3-paused"),e=!1}),n.on("ima3-started",function(e){i.default.log("ima3-started"),l(e);var t=f.default.querySelector(".vjs-ima3-flash .vjs-ad-control-bar .vjs-play-progress");t.className=t.className.replace(" vjs-play-progress-resetting","")}),n.on("ima3-complete",function(e){i.default.log("ima3-complete");var t=f.default.querySelector(".vjs-ima3-flash .vjs-ad-control-bar .vjs-play-progress");t.className+=" vjs-play-progress-resetting",t.style.width="0"});var c=function(e){var t=a.ima3._object.vjs_getCuePoints(),n=t&&0===t.length,o=t&&0===t.indexOf(0);"VAST"===e&&n?(a.ima3._object.vjs_destroyAdsManager(),a.trigger("ad-hard-timeout"),i.default.log("ima3-hard-timeout")):"VMAP"===e&&o&&(a.ima3._object.vjs_cancelNextAd(),a.trigger("ad-hard-timeout"),i.default.log("ima3-hard-timeout"))};a.ima3.settings.hardTimeouts&&a.on("adtimeout",function(){a.ima3._object.vjs_isAdsManagerReady&&a.ima3._object.vjs_isAdsManagerReady()?c("VAST"):(d("ima3-ads-manager-loaded",function(){c("VMAP")}),d("adsready",function(){c("VAST")}))}),n.on("ima3-resumed",l),n.on("ima3-paused",l),n.on("ima3-first-quartile",l),n.on("ima3-midpoint",l),n.on("ima3-third-quartile",l),n.on("ima3-volume-changed",l),n.on("ima3-click",l),n.on("ima3-complete",l),n.on("ima3-all-ads-completed",l),n.on("ads-request",l),n.on("ads-load",l),n.on("ads-pod-ended",l),n.on("ads-pod-started",l)}(),n.currentTime=function(){if(n.currentTimeCache&&(new Date).getTime()-n.currentTimeCacheTime<250)return n.currentTimeCache;var e=c();return e=e<0?0:e,n.currentTimeCache=e,n.currentTimeCacheTime=(new Date).getTime(),e},n.on("ima3-started",function(){a.removeClass("vjs-ima3-paused")}),n.on("adserror",function(){a.trigger("adserror")}),n.on("adscanceled",function(){a.trigger("adscanceled")}),n.duration=function(){if(n.durationCache&&(new Date).getTime()-n.durationCacheTime<250)return n.durationCache;var e=l();return e=e<0?0:e,n.durationCache=e,n.durationCacheTime=(new Date).getTime(),e},n.isFullscreen=function(){return a.isFullscreen()},n.requestFullscreen=function(){return a.requestFullscreen()},n.volume=function(e){var t=g();return void 0===e?t||a.ima3.volume:(g(e),a.ima3.volume=e||a.ima3.volume,n.trigger("volumechange"),void 0)},n.muted=function(e){var t=g();return void 0!==e?0===n.volume(e?0:a.ima3.volume):0===t},n.pause=function(){n.trigger("pause"),m()},n.paused=u("paused"),n.play=function(){n.trigger("play"),p()},n};var n="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,i=a(n),o=e("global/window"),r=a(o),c=e("global/document"),f=a(c),u=i.default.ima3.extend,p=function(e,t){return"function"==typeof getComputedStyle?r.default.getComputedStyle(e)[t]:e.currentStyle[t]},g=function(e){var t=parseInt(p(e.el(),"width"),10),a=parseInt(p(e.el(),"height"),10);return{width:t,height:a}},h=function(e,t,a){var n={},i={0:"PREROLL","-1":"POSTROLL"},o=function(t,o){var r=function(t){a.trigger({type:o,emitter:e,originalEvent:t}),a.trigger({type:a.ima3.settings.eventMap[o],emitter:e,originalEvent:t}),void 0!==a.ima3.currentAd&&(a.ads.ad.id=a.ima3.currentAd.getAdId(),a.ads.ad.duration=a.ima3.currentAd.getDuration(),a.ads.ad.currentTime=a.ima3.currentAd.getAdPodInfo().getTimeOffset(),a.ads.ad.index=a.ima3.currentAd.getAdPodInfo().getAdPosition()-1,a.ads.ad.type=i[a.ima3.currentAd.getAdPodInfo().getTimeOffset()]||"MIDROLL",a.ads.pod.id=a.ima3.currentAd.getAdPodInfo().getPodIndex(),a.ads.pod.size=a.ima3.currentAd.getAdPodInfo().getTotalAds())};n[t]=r,e.addEventListener(t,r,!1)};for(var r in t)o(t[r][0],t[r][1]);return function(){for(var t in n)e.removeEventListener(t,n[t])}},v=function(e,t){var a=f.default.createElement("script"),n=f.default.querySelector("head");a.async=!0,a.src=e,a.onload=a.onreadystatechange=function(e,n){(n||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,a.parentNode.removeChild(a),a=null,t(n))},n.insertBefore(a,n.firstChild)},y=function(e){for(var t={},a=function(e){return"ima3-"+e.toLowerCase().replace(/_/g,"-")},n=["AdErrorEvent","AdEvent","AdsManagerLoadedEvent"],i=n.length;i--;)if(e[n[i]]&&e[n[i]].Type){var o=e[n[i]].Type;for(var r in o)o.hasOwnProperty(r)&&(t[o[r]]=[o[r],a(r)])}return t},d=i.default.ima3.Html5=function(e){var t=this,a=this.el().querySelector(".vjs-tech"),n=void 0,o=void 0,d=f.default.createElement("div"),s=void 0,l=void 0,c=void 0,m=function(){t.ima3&&t.ima3.adsManager&&t.ima3.adsManager.skip&&t.ima3.adsManager.skip(),c(),t.trigger("ad-hard-timeout"),i.default.log("ima3-hard-timeout")},p=void 0,T=void 0,b=function(e){e.ads.ad={},e.ads.pod={}};this.ima3.adTech="html5",d.className="vjs-ima3-ad-container",this.ima3.insertAdContainer(d);var w=function(a){t.trigger("ads-request"),t.ads.startLinearAdMode(),c(),s(e,a),t.addClass("ima3-ad-loading")};i.default.ima3.Html5.adrequest=function(){return i.default.log.warn("videojs.ima3.Html5.adrequest is deprecated. Use player.ima3.adrequest instead."),w.apply(this,arguments)},this.ima3.adrequest=this.ima3.makeAdRequestFunction(w),this.on("ima3-content-pause-requested",function(e){t.ads.startLinearAdMode(),t.addClass("ima3-ad-loading"),t.trigger("ads-pod-started")}),this.on("ima3-content-resume-requested",function(e){t.ads.endLinearAdMode(),t.removeClass("ima3-ad-loading"),t.trigger("ads-pod-ended")}),this.on("fullscreenchange",function(e){if(i.default.IS_ANY_SAFARI)for(var a=t.textTracks(),n=0;n<a.length;n++)"metadata"===a[n].kind&&"disabled"===a[n].mode&&(a[n].mode="hidden");var o=t.hasClass("vjs-fullscreen"),r=3,d=void 0,s=function e(a,n){var i=g(t);return function(){d===p.ViewMode.FULLSCREEN?t.ima3.adsManager.resize(t.el().offsetWidth,t.el().offsetHeight,d):t.ima3.adsManager.resize(i.width,i.height,d),i.width===a&&i.height===n||r--&&setTimeout(e(i.width,i.height),1e3)}};if(t.ima3&&t.ima3.adsManager){d=o?p.ViewMode.FULLSCREEN:p.ViewMode.NORMAL;var u=g(t);d===p.ViewMode.FULLSCREEN?t.ima3.adsManager.resize(t.el().offsetWidth,t.el().offsetHeight,d):t.ima3.adsManager.resize(u.width,u.height,d),setTimeout(s(u.width,u.height),1e3)}}),this.on("ima3-started",function(){t.removeClass("ima3-ad-loading"),i.default.log("ima3-started");var e=f.default.querySelector(".vjs-ima3-html5 .vjs-ad-control-bar .vjs-play-progress");e.className=e.className.replace(" vjs-play-progress-resetting","")}),this.on("ima3-ad-error",function(e){e.originalEvent&&i.default.log("ima3-ad-error",e.originalEvent.getError().toString(),e),t.removeClass("ima3-ad-loading"),t.trigger("adserror")});var M=function(){0===t.ima3.adsManager.getCuePoints().length?(c(),t.trigger("ad-hard-timeout"),i.default.log("ima3-hard-timeout")):t.ima3.adsManager.getCuePoints().indexOf(0)>=0&&(t.ima3.adsManager.discardAdBreak(),t.trigger("ad-hard-timeout"),i.default.log("ima3-hard-timeout"))};e.hardTimeouts&&this.on("adtimeout",function(){t.ima3.adsManager?M():t.one("ima3-ads-manager-loaded",function(){M()})}),this.on("ima3-loaded",function(e){var a=e.originalEvent.getAd();t.ima3.currentAd=a,t.removeClass("ima3-ad-loading"),a&&!a.isLinear()&&(t.addClass("vjs-ima3-overlay"),t.trigger("adstart"),t.trigger("adend"))}),this.on("ima3-complete",function(e){var a=e.originalEvent.getAd();i.default.log("ima3-complete"),delete t.ima3.currentAd,a&&(a.isLinear()?t.addClass("ima3-ad-loading"):t.removeClass("vjs-ima3-overlay"));var n=f.default.querySelector(".vjs-ima3-html5 .vjs-ad-control-bar .vjs-play-progress");n.className+=" vjs-play-progress-resetting",n.style.width="0"}),this.on("resize",function(){if(t.ima3.adsManager){var e=g(t);t.ima3.adsManager.resize(e.width,e.height,p.ViewMode.NORMAL)}}),this.on("readyforpreroll",function(){"ondemand"!==e.requestMode&&"oncue"!==e.requestMode&&l()}),this.on("adserror",function(){c()}),this.on("adscanceled",function(){c()});var C=function(e){t.ima3.adsManager.discardAdBreak(),t.ima3.adsManager.skip(),t.ima3.managerCleanup=null,"ad-playback"===t.ads.state&&t.trigger("adend")};this.on("ima3-ads-manager-loaded",function(e){t.ima3.managerCleanup&&c();var a={};a.currentTime=t.currentTime(),a.duration=t.duration(),t.on("timeupdate",function(){a.currentTime=t.currentTime()});var n=e.originalEvent.getAdsManager(a);t.ima3.adsManager=n;var o=t.ima3.settings,r=t.ima3.adsManager.getCuePoints(),d=r&&r.length>0;return o.useMediaCuePoints&&"oncue"===o.requestMode&&d?(C(e),void i.default.log.error("Cancelling VMAP ad because useMediaCuePoints must be used with VAST")):(t.ima3.managerCleanup=h(n,T,t),"ad-playback"===t.ads.state?l():t.trigger("adsready"),void("oncue"!==o.requestMode&&(n.getCuePoints().length&&n.getCuePoints().indexOf(0)<0&&t.trigger("nopreroll"),n.getCuePoints().indexOf(-1)<0&&t.trigger("nopostroll"))))});var _=function(e,a){var n=g(t);return!t.ima3.lastSrc_||t.ima3.lastSrc_!==t.currentSrc()||"onload"!==e.requestMode&&"onplay"!==e.requestMode?(t.ima3.lastSrc_=t.currentSrc(),t.ima3.adsRequest=u(new p.AdsRequest,{adTagUrl:t.ima3.adMacroReplacement(a||t.ima3.settings.serverUrl),linearAdSlotWidth:n.width,linearAdSlotHeight:n.height,nonLinearAdSlotWidth:n.width,nonLinearAdSlotHeight:n.height}),t.ima3.adsRequest.adTagUrl?(t.ima3.adsLoader.requestAds(t.ima3.adsRequest),void t.trigger("ads-request")):void t.trigger("adscanceled")):void i.default.log("Cancelling repeat adsRequest for "+t.currentSrc())};s=function(e,a){"onplay"===e.requestMode&&t.paused()?t.one("play",function(){_(e,a)}):_(e,a)},l=function(){var e=g(t);try{t.ima3.adsManager.setVolume(.01),t.trigger("ads-load"),t.ima3.adsManager.init(e.width,e.height,p.ViewMode.NORMAL),t.ima3.adsManager.start()}catch(e){t.trigger("adserror")}},c=function(){t.ima3.adsManager&&(t.ima3.adsManager.destroy(),t.ima3.adsManager=null),t.ima3.managerCleanup&&(t.ima3.managerCleanup(),t.ima3.managerCleanup=null)};var A=function(){var u=i.default.getComponent("ControlBar");if(p=r.default.google.ima,T=y(p),e.ima3SdkSettings)for(var l in e.ima3SdkSettings){var c="set"+l.charAt(0).toUpperCase()+l.slice(1);"function"==typeof p.settings[c]?p.settings[c](e.ima3SdkSettings[l]):i.default.log.warn('Invalid ima3SdkSetting: "'+l+'"')}if(o=i.default.ima3.Html5.adPlayer(d,{contentPlayer:t}),n=new u(o,e.adControlBar),n.addClass("vjs-ad-control-bar"),t.addClass("vjs-ad-controls"),t.addChild(n),t.ima3.adControlBar=n,t.ima3.adPlayer=o,e.vpaidMode){if("number"!=typeof p.ImaSdkSettings.VpaidMode[e.vpaidMode])throw new Error('Invalid VPAID Mode: "'+e.vpaidMode+'"');p.settings.setVpaidMode(p.ImaSdkSettings.VpaidMode[e.vpaidMode])}t.ima3.adDisplayContainer=new p.AdDisplayContainer(d,a,e.clickTrackingElement),t.one("touchend",function(){t.ima3.adDisplayContainer.initialize()}),t.ima3.adsLoader=new p.AdsLoader(t.ima3.adDisplayContainer);var f=t.ima3.adsLoader.getSettings();f.setPlayerVersion(t.ima3.version),f.setPlayerType("brightcove/player-html5"),t.ima3.loaderCleanup=h(t.ima3.adsLoader,T,t);var g=t.currentSrc();t.mediainfo&&"FREE"===t.mediainfo.economics?(t.trigger("adscanceled"),t.trigger("nopreroll"),t.trigger("nopostroll")):g&&""!==g&&"ondemand"!==e.requestMode&&"oncue"!==e.requestMode&&s(e),t.on("contentupdate",function(){return g=t.currentSrc(),t.mediainfo&&"FREE"===t.mediainfo.economics?(t.trigger("adscanceled"),t.trigger("nopreroll"),void t.trigger("nopostroll")):void(g&&""!==g&&"ondemand"!==e.requestMode&&"oncue"!==e.requestMode&&s(e))}),t.on("contentended",function(){"postroll?"===t.ads.state&&(t.one("adtimeout",m),t.ima3.adsLoader.contentComplete())}),t.on(["contentupdate","dispose"],function(){t.off("adtimeout",m)}),t.on(["contentupdate","adend","ima3-ready"],function(){b(t)}),t.ima3.el=d};r.default.google&&r.default.google.ima?(A(),this.trigger("ima3-ready")):v(e.sdkurl,function(e){A(),e?t.trigger({type:"adserror",info:e}):t.trigger("ima3-ready")})};d.eventTypes=y,i.default.ima3.Html5.adPlayer=function(e,t){var a=t.contentPlayer,n=new i.default.ima3.AdPlayer(t),o=!0,d=function e(){n.paused()||n.trigger("timeupdate"),r.default.setTimeout(e,1e3)};return n.currentTime=function(){var e=n.duration();if(!e||!a.ima3.adsManager)return 0;var t=a.ima3.adsManager.getRemainingTime();return t<=0?0:t>e?0:t>0?e-t:void 0},n.duration=function(){var e=a.ima3.currentAd;if(e){var t=e.getDuration();return t>0?t:0}return 0},n.pause=function(){o=!0,a.ima3.adsManager.pause()},n.paused=function(){return o},n.play=function(){o=!1,a.ima3.adsManager.resume(),n.trigger("play")},n.isFullscreen=function(){return a.isFullscreen()},n.requestFullscreen=function(){return a.requestFullscreen()},n.volume=function(e){if(!a.ima3||!a.ima3.adsManager)return void i.default.log.error("Too early to set Volume. IMA3 is not loaded");var t=a.ima3.adsManager.getVolume();return void 0!==e&&(a.ima3.adsManager.setVolume(e),a.ima3.volume=e||a.ima3.volume,n.trigger("volumechange")),t||a.ima3.volume},n.muted=function(e){var t=a.ima3.adsManager.getVolume();return void 0!==e?0===n.volume(e?0:a.ima3.volume):0===t},a.on("ima3-started",function(){a.removeClass("vjs-ima3-paused"),n.trigger("play"),o=!1}),a.on("ima3-resumed",function(){a.removeClass("vjs-ima3-paused"),n.trigger("play"),o=!1}),a.on("ima3-paused",function(){a.addClass("vjs-ima3-paused"),n.trigger("pause"),o=!0}),d(),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/document":2,"global/window":3,"videojs-contrib-ads":8}]},{},[11])(11)});